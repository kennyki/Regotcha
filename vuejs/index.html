<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VueJS | Regotcha</title>
    <meta name="description" content="Recounting &quot;gotcha!&quot; moments">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.415e7076.css" as="style"><link rel="preload" href="/assets/js/app.f0d2bd3e.js" as="script"><link rel="preload" href="/assets/js/2.2a9a32d0.js" as="script"><link rel="preload" href="/assets/js/25.d08420c5.js" as="script"><link rel="prefetch" href="/assets/js/10.ac606a2f.js"><link rel="prefetch" href="/assets/js/11.1a1f3439.js"><link rel="prefetch" href="/assets/js/12.b3463a2a.js"><link rel="prefetch" href="/assets/js/13.7b5850f0.js"><link rel="prefetch" href="/assets/js/14.65feb6f7.js"><link rel="prefetch" href="/assets/js/15.f159b74f.js"><link rel="prefetch" href="/assets/js/16.44dc31b2.js"><link rel="prefetch" href="/assets/js/17.dd2638af.js"><link rel="prefetch" href="/assets/js/18.970b97c2.js"><link rel="prefetch" href="/assets/js/19.b141337d.js"><link rel="prefetch" href="/assets/js/20.a39f501c.js"><link rel="prefetch" href="/assets/js/21.c747eb16.js"><link rel="prefetch" href="/assets/js/22.9d1af04e.js"><link rel="prefetch" href="/assets/js/23.22cf24e4.js"><link rel="prefetch" href="/assets/js/24.aebb8fde.js"><link rel="prefetch" href="/assets/js/26.b1ce0b0c.js"><link rel="prefetch" href="/assets/js/27.c4114b59.js"><link rel="prefetch" href="/assets/js/28.3cd5c2bd.js"><link rel="prefetch" href="/assets/js/3.13432ba3.js"><link rel="prefetch" href="/assets/js/4.b312017a.js"><link rel="prefetch" href="/assets/js/5.2b435b27.js"><link rel="prefetch" href="/assets/js/6.d16757aa.js"><link rel="prefetch" href="/assets/js/7.26ef853c.js"><link rel="prefetch" href="/assets/js/8.04fd9295.js"><link rel="prefetch" href="/assets/js/9.2b9a1b52.js">
    <link rel="stylesheet" href="/assets/css/0.styles.415e7076.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Regotcha</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/kennyki/regotcha" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/kennyki/regotcha" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">Home</a></li><li><a href="/angularjs/" class="sidebar-link">AngularJS</a></li><li><a href="/bootstrap/" class="sidebar-link">Bootstrap</a></li><li><a href="/coding/" class="sidebar-link">Coding</a></li><li><a href="/css/" class="sidebar-link">CSS</a></li><li><a href="/family/" class="sidebar-link">Family</a></li><li><a href="/git/" class="sidebar-link">Git</a></li><li><a href="/github-pages/" class="sidebar-link">GitHub Pages</a></li><li><a href="/heroku/" class="sidebar-link">Heroku</a></li><li><a href="/html/" class="sidebar-link">HTML</a></li><li><a href="/hubspot/" class="sidebar-link">HubSpot</a></li><li><a href="/i18n/" class="sidebar-link">I18n</a></li><li><a href="/javascript/" class="sidebar-link">Javascript</a></li><li><a href="/macos/" class="sidebar-link">macOS</a></li><li><a href="/mongodb/" class="sidebar-link">MongoDB</a></li><li><a href="/nodejs/" class="sidebar-link">Node.js</a></li><li><a href="/scss/" class="sidebar-link">SCSS</a></li><li><a href="/singapore/" class="sidebar-link">Singapore</a></li><li><a href="/testcafe/" class="sidebar-link">TestCafe</a></li><li><a href="/traveling/" class="sidebar-link">Traveling</a></li><li><a href="/vuejs/" class="active sidebar-link">VueJS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuejs/#route-guarding" class="sidebar-link">Route guarding</a></li><li class="sidebar-sub-header"><a href="/vuejs/#deploy-to-amazon-s3-with-webpack-s3-plugin" class="sidebar-link">Deploy to Amazon S3 with webpack-s3-plugin</a></li><li class="sidebar-sub-header"><a href="/vuejs/#vuex-mutation-action-payload-must-be-an-object" class="sidebar-link">Vuex mutation/action payload must be an object</a></li><li class="sidebar-sub-header"><a href="/vuejs/#use-anchor-tag-with-click-to-navigate-programmatically" class="sidebar-link">Use anchor tag with @click to navigate programmatically</a></li><li class="sidebar-sub-header"><a href="/vuejs/#display-vuelidate-error-messages-only-on-submission" class="sidebar-link">Display Vuelidate error messages only on submission</a></li><li class="sidebar-sub-header"><a href="/vuejs/#vuelidate-custom-validator-expects-a-boolean-value" class="sidebar-link">Vuelidate custom validator expects a Boolean value</a></li><li class="sidebar-sub-header"><a href="/vuejs/#export-all-components-in-a-folder" class="sidebar-link">Export all components in a folder</a></li></ul></li><li><a href="/vuepress/" class="sidebar-link">VuePress</a></li><li><a href="/webpack/" class="sidebar-link">Webpack</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vuejs"><a href="#vuejs" aria-hidden="true" class="header-anchor">#</a> VueJS</h1> <div class="tip custom-block"><p><a href="https://vuejs.org/" target="_blank" rel="noopener noreferrer">Vue.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - The Progressive JavaScript Framework</p> <p>Note: This is referring to VueJS 2.x</p></div> <table><thead><tr><th style="text-align:left;">Table of Contents</th></tr></thead> <tbody><tr><td style="text-align:left;"><div class="table-of-contents"><ul><li><a href="#route-guarding">Route guarding</a></li><li><a href="#deploy-to-amazon-s3-with-webpack-s3-plugin-https-github-com-mikaak-s3-plugin-webpack">Deploy to Amazon S3 with webpack-s3-plugin</a></li><li><a href="#vuex-mutation-action-payload-must-be-an-object">Vuex mutation/action payload must be an object</a></li><li><a href="#use-anchor-tag-with-click-to-navigate-programmatically">Use anchor tag with @click to navigate programmatically</a></li><li><a href="#display-vuelidate-https-github-com-monterail-vuelidate-error-messages-only-on-submission">Display Vuelidate error messages only on submission</a></li><li><a href="#vuelidate-https-github-com-monterail-vuelidate-custom-validator-expects-a-boolean-value">Vuelidate custom validator expects a Boolean value</a></li><li><a href="#export-all-components-in-a-folder">Export all components in a folder</a></li></ul></div></td></tr></tbody></table> <h2 id="route-guarding"><a href="#route-guarding" aria-hidden="true" class="header-anchor">#</a> Route guarding</h2> <p><a href="https://router.vuejs.org/guide/advanced/navigation-guards.html" target="_blank" rel="noopener noreferrer">Vue Router<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> provides 3 ways to guard your routes, but I find that <code>per-route</code> guard is more succinct and easier to maintain:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// services/router-guard.js</span>
<span class="token keyword">import</span> User <span class="token keyword">from</span> <span class="token string">'@/services/user'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">requireGuest</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// will stop the routing</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token operator">!</span>User<span class="token punctuation">.</span><span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">requireUser</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// will login and come back</span>
    <span class="token function">next</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
      query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        redirect<span class="token punctuation">:</span> to<span class="token punctuation">.</span>fullPath
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// router/index.js</span>
<span class="token keyword">import</span> RouterGuard <span class="token keyword">from</span> <span class="token string">'@/services/router-guard'</span>

<span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      component<span class="token punctuation">:</span> HomeView<span class="token punctuation">,</span>
      beforeEnter<span class="token punctuation">:</span> RouterGuard<span class="token punctuation">.</span>requireUser
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
      component<span class="token punctuation">:</span> LoginView<span class="token punctuation">,</span>
      beforeEnter<span class="token punctuation">:</span> RouterGuard<span class="token punctuation">.</span>requireGuest
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="deploy-to-amazon-s3-with-webpack-s3-plugin"><a href="#deploy-to-amazon-s3-with-webpack-s3-plugin" aria-hidden="true" class="header-anchor">#</a> Deploy to Amazon S3 with <a href="https://github.com/MikaAK/s3-plugin-webpack" target="_blank" rel="noopener noreferrer">webpack-s3-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>This is assuming that the <a href="https://github.com/vuejs-templates/webpack" target="_blank" rel="noopener noreferrer">full webpack template<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is used to scaffold your project, and you have an existing S3 bucket.</p> <h4 id="step-1-install-the-plugin"><a href="#step-1-install-the-plugin" aria-hidden="true" class="header-anchor">#</a> Step 1: Install the plugin</h4> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev webpack<span class="token operator">-</span>s3<span class="token operator">-</span>plugin
</code></pre></div><h4 id="step-2-configure-webpack-to-upload-built-assets"><a href="#step-2-configure-webpack-to-upload-built-assets" aria-hidden="true" class="header-anchor">#</a> Step 2: Configure Webpack to upload built assets</h4> <p>You should have this file being scaffolded: <a href="https://github.com/vuejs-templates/webpack/blob/develop/template/build/webpack.prod.conf.js" target="_blank" rel="noopener noreferrer">build/webpack-prod.conf.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Register the plugin at the end of file:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> S3Plugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-s3-plugin'</span><span class="token punctuation">)</span>

<span class="token comment">// ...</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'testing'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// only deploy for production</span>
  webpackConfig<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">S3Plugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    s3Options<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token comment">/* your configurations */</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    s3UploadOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      Bucket<span class="token punctuation">:</span> <span class="token string">'your-bucket-name'</span><span class="token punctuation">,</span>
      <span class="token function">ContentType</span> <span class="token punctuation">(</span><span class="token parameter">fileName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/\.js/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token string">'application/javascript'</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/\.css/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token string">'text/css'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">ContentLength</span> <span class="token punctuation">(</span><span class="token parameter">fileName<span class="token punctuation">,</span> file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> file<span class="token punctuation">.</span>size
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// optional</span>
    cloudfrontInvalidateOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      DistributionId<span class="token punctuation">:</span> <span class="token string">'your-cf-id'</span><span class="token punctuation">,</span>
      Items<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'/*'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> webpackConfig
</code></pre></div><h2 id="vuex-mutation-action-payload-must-be-an-object"><a href="#vuex-mutation-action-payload-must-be-an-object" aria-hidden="true" class="header-anchor">#</a> Vuex mutation/action payload must be an object</h2> <p>According to the <a href="https://vuex.vuejs.org/guide/mutations.html#commit-with-payload" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, it says:</p> <blockquote><p>In most cases, the payload should be an object so that it can contain multiple fields, and the recorded mutation will also be more descriptive</p></blockquote> <p>But it seems to be a <em>must</em>:</p> <div class="language-js extra-class"><pre class="language-js"><code>mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// receiver and messages are always undefined</span>
  <span class="token function">startConversation</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> me<span class="token punctuation">,</span> receiver<span class="token punctuation">,</span> messages</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The working solution:</p> <div class="language-js extra-class"><pre class="language-js"><code>mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token function">startConversation</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> <span class="token punctuation">{</span>me<span class="token punctuation">,</span> receiver<span class="token punctuation">,</span> messages<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="use-anchor-tag-with-click-to-navigate-programmatically"><a href="#use-anchor-tag-with-click-to-navigate-programmatically" aria-hidden="true" class="header-anchor">#</a> Use anchor tag with <code>@click</code> to navigate programmatically</h2> <p>Sometimes it's needed for the styles or semantics. You must use <em>either</em> <code>href='#'</code> or <code>@click.prevent</code> to prevent browser's default page navigation:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>#<span class="token punctuation">'</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>doSomethingThenNavigate()<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>Go<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="display-vuelidate-error-messages-only-on-submission"><a href="#display-vuelidate-error-messages-only-on-submission" aria-hidden="true" class="header-anchor">#</a> Display <a href="https://github.com/monterail/vuelidate" target="_blank" rel="noopener noreferrer">Vuelidate<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> error messages only on submission</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>required<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuelidate/lib/validators'</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'SubscriptionForm'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  validations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    email<span class="token punctuation">:</span> <span class="token punctuation">{</span>required<span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">submit</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// $invalid is true all the time if a field fails validation</span>
      <span class="token comment">// but we don't want to show error message yet</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$v<span class="token punctuation">.</span>$invalid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// so we only mark it as $dirty on submission</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$v<span class="token punctuation">.</span><span class="token function">$touch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// if all fields are valid, reset the $dirty flag for later use (if any)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$v<span class="token punctuation">.</span><span class="token function">$reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// proceed to submission</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-pug extra-class"><pre class="language-pug"><code><span class="token tag">input.form-control<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">v-model</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">'email'</span></span><span class="token punctuation">,</span> <span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">'email'</span></span><span class="token punctuation">)</span></span></span>
<span class="token comment">//- $error is equivalent to $dirty &amp;&amp; !$pending &amp;&amp; $invalid</span>
<span class="token tag">.text-danger<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">v-if</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">'$v.email.$error'</span></span><span class="token punctuation">)</span></span></span> <span class="token plain-text">Please enter your email</span>
</code></pre></div><h2 id="vuelidate-custom-validator-expects-a-boolean-value"><a href="#vuelidate-custom-validator-expects-a-boolean-value" aria-hidden="true" class="header-anchor">#</a> <a href="https://github.com/monterail/vuelidate" target="_blank" rel="noopener noreferrer">Vuelidate<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> custom validator expects a Boolean value</h2> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'SubscriptionForm'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  validations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    email<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token function">required</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// assuming a String value,</span>
        <span class="token comment">// this will result in TypeError: Cannot read property '__isVuelidateAsyncVm' of undefined</span>
        <span class="token keyword">return</span> value
        <span class="token comment">// so, you must convert it into a Boolean value</span>
        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>value
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="export-all-components-in-a-folder"><a href="#export-all-components-in-a-folder" aria-hidden="true" class="header-anchor">#</a> Export all components in a folder</h2> <p><em>Use case:</em> Assuming a Vue CLI or Webpack project with a bunch of components, e.g. app-alerts.vue, app-loader.vue in <code>src/components</code></p> <h4 id="straightforward-approach-use-an-index-js-for-named-exports"><a href="#straightforward-approach-use-an-index-js-for-named-exports" aria-hidden="true" class="header-anchor">#</a> Straightforward approach: use an index.js for named exports</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/components/index.js</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> AppAlerts <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./app-alerts'</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> AppLoader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./app-loader'</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/views/home.vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppAlerts<span class="token punctuation">,</span> AppLoader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../components'</span>
</code></pre></div><p>The <em>catch</em>: you need to add the named export manually for every component</p> <h4 id="dynamic-approach-use-webpack-s-require-context"><a href="#dynamic-approach-use-webpack-s-require-context" aria-hidden="true" class="header-anchor">#</a> Dynamic approach: use Webpack's <code>require.context</code></h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/require-all.js</span>
<span class="token keyword">import</span> camelCase <span class="token keyword">from</span> <span class="token string">'lodash/camelCase'</span>
<span class="token keyword">import</span> upperFirst <span class="token keyword">from</span> <span class="token string">'lodash/upperFirst'</span>

<span class="token comment">// inspirations</span>
<span class="token comment">// - https://vuejs.org/v2/guide/components-registration.html#Automatic-Global-Registration-of-Base-Components</span>
<span class="token comment">// - https://stackoverflow.com/a/39709236/940030</span>
<span class="token comment">// - https://stackoverflow.com/a/30652110/940030</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">contextRequire<span class="token punctuation">,</span> nameCasers <span class="token operator">=</span> <span class="token punctuation">[</span> camelCase<span class="token punctuation">,</span> upperFirst <span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  contextRequire<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fileName</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> item <span class="token operator">=</span> <span class="token function">contextRequire</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>

    <span class="token comment">// Gets the file name regardless of folder depth</span>
    <span class="token keyword">const</span> actualFileName <span class="token operator">=</span> fileName
      <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\.\w+$/</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> name <span class="token operator">=</span> nameCasers<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result<span class="token punctuation">,</span> nameCaser</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">nameCaser</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">,</span> actualFileName<span class="token punctuation">)</span>

    <span class="token comment">// either default export or named export</span>
    items<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">.</span>default <span class="token operator">||</span> item
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> items
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/components/index.js</span>
<span class="token keyword">import</span> requireAll <span class="token keyword">from</span> <span class="token string">'../require-all'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">requireAll</span><span class="token punctuation">(</span>require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span>
  <span class="token comment">// The relative path of the folder</span>
  <span class="token string">'.'</span><span class="token punctuation">,</span>
  <span class="token comment">// Whether or not to look in subfolders</span>
  <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// The regular expression used to match filenames</span>
  <span class="token operator">/</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>vue<span class="token operator">|</span>js<span class="token punctuation">)</span>$<span class="token operator">/</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> camelCase<span class="token punctuation">,</span> upperFirst <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/views/home.vue</span>
<span class="token keyword">import</span> components <span class="token keyword">from</span> <span class="token string">'../components'</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> AppAlerts<span class="token punctuation">,</span> AppLoader <span class="token punctuation">}</span> <span class="token operator">=</span> components

<span class="token comment">// or</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> AppAlerts<span class="token punctuation">,</span> AppLoader <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../components'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>default
</code></pre></div><p>The <em>catch</em>: can be less-readable when importing the components in the view</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/kennyki/regotcha/edit/master/vuejs/README.md" target="_blank" rel="noopener noreferrer">Add more on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/traveling/" class="prev">Traveling</a></span> <span class="next"><a href="/vuepress/">VuePress</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f0d2bd3e.js" defer></script><script src="/assets/js/2.2a9a32d0.js" defer></script><script src="/assets/js/25.d08420c5.js" defer></script>
  </body>
</html>
